{% extends 'base.html' %}

{% block title %}Profile{% endblock %}

{% block content %}
<h1>Welcome, {{ user.name }} {{ user.surname }}!</h1>

<p>Profile Picture:</p>
{% if user.profile_picture %}
    <img src="{{ user.profile_picture.url }}" alt="Profile Picture" style="max-width: 200px; max-height: 200px;">
{% else %}
    <p>No profile picture uploaded.</p>
{% endif %}
    <p>Phone Number: {{ user.phone_number }}</p>
<p>Age: {{ user.age }}</p>
<p>City: {{ user.city.name }}</p>
<h3>QR Code</h3>
{% if user.qr_code %}
    <img src="{{ user.qr_code.url }}" alt="QR Code" style="max-width: 200px;">
{% else %}
    <p>QR Code not available</p>
{% endif %}
<form method="post" action="{% url 'logout' %}">
    {% csrf_token %}
    <button type="submit">Logout</button>
</form>
<button onclick="showEditPopup()">Edit Profile</button>

<!-- Попап для редактирования профиля -->
<div id="editPopup" style="display: none;">
    <h2>Edit Profile</h2>
    <form method="post" action="{% url 'profile_edit' %}" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Save Changes</button>
        <button type="button" onclick="hideEditPopup()">Cancel</button>
    </form>
</div>

<script>
    function showEditPopup() {
        document.getElementById('editPopup').style.display = 'block';
    }

    function hideEditPopup() {
        document.getElementById('editPopup').style.display = 'none';
    }
</script>
{% endblock %}
